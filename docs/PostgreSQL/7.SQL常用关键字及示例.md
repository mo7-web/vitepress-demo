# SQL 常用关键字及示例

## SQL 语句

一个 SQL 语句通常包含了关键字、标识符（字段）、常量、特殊符号等，下面是一个简单的 SQL 语句：

```sql

SELECT id, name FROM runoob

```

|          | SELECT | id, name        | FROM                     | runoob |
| -------- | ------ | --------------- | ------------------------ | ------ |
| 符号类型 | 关键字 | 标识符（字段）  | 关键字                   | 标识符 |
| 描述     | 命令   | id 和 name 字段 | 语句，用于设置条件规则等 | 表名   |

---

## 一、数据查询关键字（SELECT）

### SELECT

- 含义：从表中选取数据
- 示例：

```sql
-- 选取users表中所有列
SELECT * FROM users;

-- 查询 myschema 下的 "user" 表的所有数据
SELECT * FROM myschema."user";

-- 选取特定列
SELECT name, email FROM users;
```

### FROM

- 含义：指定要查询的表
- 示例：

```sql
SELECT product_name FROM products;
```

### WHERE

- 含义：过滤满足条件的记录
- 示例：

```sql
-- 查询age大于18的用户
SELECT * FROM users WHERE age > 18;

-- 多条件查询
SELECT * FROM products WHERE price < 100 AND stock > 0;
```

### DISTINCT

- 含义：返回唯一不同的值
- 示例：

```sql
-- 获取所有不重复的城市
SELECT DISTINCT city FROM customers;
```

### ORDER BY

- 含义：对结果集进行排序
- 示例：

```sql
-- 按价格升序排列(默认ASC)
SELECT * FROM products ORDER BY price;

-- 按日期降序排列
SELECT * FROM orders ORDER BY order_date DESC;
```

### LIMIT

- 含义：限制返回的记录数
- 示例：

```sql
-- 获取前10条记录
SELECT * FROM users LIMIT 10;
```

### OFFSET

- 含义：指定开始返回记录前要跳过的行数（常用于分页）
- 示例：

```sql
-- 获取第11-20条记录
SELECT * FROM users LIMIT 10 OFFSET 10;
```

## 二、数据操纵关键字

### INSERT

- 含义：向表中插入新记录
- 示例：

```sql
-- 插入完整记录
INSERT INTO users (name, email, age)
VALUES ('张三', 'zhangsan@example.com', 25);

-- 插入多条记录
INSERT INTO products (name, price)
VALUES
  ('笔记本电脑', 5999),
  ('手机', 3999);
```

### UPDATE

- 含义：更新表中的记录
- 示例：

```sql
-- 更新用户年龄
UPDATE users
SET age = 26
WHERE id = 1;

-- 同时更新多个字段
UPDATE products
SET price = price * 0.9, stock = stock - 1
WHERE category = '电子产品';
```

### DELETE

- 含义：从表中删除记录
- 示例：

```sql
-- 删除特定记录
DELETE FROM users WHERE id = 5;

-- 删除符合条件的所有记录
DELETE FROM orders WHERE order_date < '2023-01-01';
```

## 三、数据定义关键字

### CREATE

- 含义：创建数据库对象（表、数据库等）
- 示例：

```sql
-- 创建数据库
CREATE DATABASE mydb;

-- 创建表
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  name VARCHAR(50) NOT NULL,
  email VARCHAR(100) UNIQUE,
  age INT
);
```

### ALTER

- 含义：修改数据库对象结构
- 示例：

```sql
-- 向表中添加列
ALTER TABLE users ADD COLUMN phone VARCHAR(20);

-- 修改列类型
ALTER TABLE products ALTER COLUMN price TYPE NUMERIC(10,2);
```

### DROP

- 含义：删除数据库对象
- 示例：

```sql
-- 删除表
DROP TABLE temp_data;

-- 删除数据库
DROP DATABASE old_db;
```

### TRUNCATE

- 含义：删除表中所有记录（保留表结构）
- 示例：

```sql
-- 清空表数据
TRUNCATE TABLE logs;
```

## 四、条件与逻辑关键字

### AND / OR

- 含义：组合多个条件
- 示例：

```sql
-- AND 逻辑
SELECT * FROM products WHERE price > 100 AND stock > 5;

-- OR 逻辑
SELECT * FROM users WHERE age < 18 OR age > 60;
```

### IN

- 含义：指定多个可能的值
- 示例：

```sql
-- 查询特定ID的用户
SELECT * FROM users WHERE id IN (1, 3, 5);

-- 查询特定类别的产品
SELECT * FROM products WHERE category IN ('手机', '电脑');
```

### BETWEEN

- 含义：选取介于两个值之间的数据范围
- 示例：

```sql
-- 查询价格在100到500之间的产品
SELECT * FROM products WHERE price BETWEEN 100 AND 500;

-- 等价于 该关键字可以完全被  AND 取代
SELECT * FROM products WHERE price >= 100 AND price >= 5;
```

### LIKE

- 含义：用于在 WHERE 子句中搜索列中的指定模式
- 示例：

```sql
-- 查找以"张"开头的名字
SELECT * FROM users WHERE name LIKE '张%';

-- 查找邮箱包含"example"的用户
SELECT * FROM users WHERE email LIKE '%example%';
```

### IS NULL / IS NOT NULL

- 含义：判断字段是否为 NULL
- 示例：

```sql
-- 查找未填写邮箱的用户
SELECT * FROM users WHERE email IS NULL;

-- 查找有电话号码的用户
SELECT * FROM users WHERE phone IS NOT NULL;
```

## 五、聚合与分组关键字

### GROUP BY

- 含义：结合聚合函数，根据一个或多个列对结果集进行分组
- 示例：

```sql
-- 按类别统计产品数量
SELECT category, COUNT(*)
FROM products
GROUP BY category;
```

### HAVING

- 含义：筛选分组后的各组数据（与 GROUP BY 一起使用）
- 示例：

```sql
-- 查找产品数量大于10的类别
SELECT category, COUNT(*)
FROM products
GROUP BY category
HAVING COUNT(*) > 10;
```

### 聚合函数

- COUNT (): 计数
- SUM (): 求和
- AVG (): 平均值
- MAX (): 最大值
- MIN (): 最小值

示例：

```sql
-- 统计用户总数
SELECT COUNT(*) FROM users;

-- 计算平均价格
SELECT AVG(price) FROM products;

-- 查找最高订单金额
SELECT MAX(total_amount) FROM orders;
```

## 六、连接关键字

### JOIN

- 含义：用于把来自两个或多个表的行结合起来
- 示例：

```sql
-- 内连接：获取有订单的用户信息
SELECT users.name, orders.order_id
FROM users
INNER JOIN orders ON users.id = orders.user_id;

-- 左连接：获取所有用户及其订单（包括没有订单的用户）
SELECT users.name, orders.order_id
FROM users
LEFT JOIN orders ON users.id = orders.user_id;
```

## 七、其他常用关键字

### AS

- 含义：为列或表指定别名
- 示例：

```sql
-- 为列指定别名
SELECT name AS 用户名, email AS 邮箱 FROM users;

-- 为表指定别名
SELECT u.name, o.order_date
FROM users AS u
JOIN orders AS o ON u.id = o.user_id;
```

### UNION

- 含义：合并两个或多个 SELECT 语句的结果集
- 示例：

```sql
-- 合并两个查询结果
SELECT name FROM students
UNION
SELECT name FROM teachers;
```

### EXISTS

- 含义：用于测试子查询是否存在任何记录
- 示例：

```sql
-- 查找有订单的用户
SELECT name
FROM users
WHERE EXISTS (
  SELECT 1 FROM orders WHERE orders.user_id = users.id
);
```

这些是 SQL 中最常用的关键字，通过实际练习将它们组合使用，能帮助你编写更复杂的查询语句。建议结合你熟悉的编程语言思维来理解 SQL 的逻辑，比如把 SELECT 看作函数的返回值，WHERE 看作条件判断等。
