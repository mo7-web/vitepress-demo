# 官方文档

https://www.postgresql.org/download/linux/debian/

## 安装

菜鸟教程
https://www.runoob.com/postgresql/linux-install-postgresql.html

```bash
sudo apt-get update
sudo apt-get install postgresql postgresql-client


# 以 root 身份登录 postgres
sudo -i -u postgres
# 目前默认安装的是   (15.13 (Debian 15.13-0+deb12u1))

# 查看数据库信息和版本
psql

```

postgres 是 PostgreSQL 安装时自动创建的系统用户，拥有管理数据库的最高权限。

PostgreSQL 的设计遵循 "最小权限原则"，为安全起见，数据库服务默认由专用用户 postgres 运行，而非 root 或普通用户。

## 启动与终止

PostgreSQL 安装完成后默认是已经启动的，但是也可以通过下面的方式来手动启动服务。

```bash
sudo /etc/init.d/postgresql start   # 开启
sudo /etc/init.d/postgresql stop    # 关闭
sudo /etc/init.d/postgresql restart # 重启
```

## 基本结构

### 1. 实例（Instance）

最顶层的概念，对应一个运行中的 PostgreSQL 服务进程（及相关内存、进程）。一个实例可以管理多个**数据库**，但实例内的数据库是**完全隔离**的（默认无法直接跨库访问）。

### 2. 数据库（Database）

实例下的独立数据集合，每个数据库有自己的权限控制和对象空间。用户连接 PostgreSQL 时，必须指定要连接的数据库（不能同时操作多个数据库）。

### 3. 模式（Schema）

数据库内部的 “逻辑容器”，用于组织和隔离数据库对象（避免命名冲突）。一个数据库可以包含多个模式，模式之间相互独立，但属于同一数据库（共享数据库的权限和资源）。

- **默认模式**：每个数据库默认有一个  `public`  模式，若不指定模式，对象会默认创建在  `public`  中。
- **作用**：常用于多用户 / 多模块隔离（例如：不同用户的表放在不同模式下，避免表名重复）。

### 4. 数据库对象（Database Objects）

模式下包含各种具体的数据库对象，核心包括：

- **表（Table）**：存储数据的基本结构，由**字段（Column）**  和行（Row）组成。
- 其他对象：视图（View）、函数（Function）、存储过程（Procedure）、序列（Sequence）、索引（Index）、约束（Constraint，如主键、外键）、触发器（Trigger）等。

### 5. 表的组成

表是存储数据的核心，其内部结构包括：

- **字段（Column）**：表的列，每个字段有名称、数据类型（如  `int`、`varchar`）、约束（如  `NOT NULL`、`UNIQUE`）等属性。
- **行（Row）**：实际的数据记录，由各个字段的具体值组成。
- 附加结构：主键、外键、索引、触发器等（用于保证数据完整性或提升查询效率）。

### 简化理解的层级关系

```plaintext
实例（Instance）
└── 数据库（Database）
    └── 模式（Schema）
        ├── 表（Table）
        │   ├── 字段（Column）
        │   ├── 行（Row）
        │   └── 约束/索引等
        ├── 视图（View）
        ├── 函数（Function）
        └── 其他对象...
```

你提到的 “数据库列表 -> 表列表 -> 字段” 是简化后的常用视角（忽略了 “实例” 和 “模式”），但实际结构中 “模式” 是重要的逻辑隔离层（尤其在多用户 / 多模块场景下）。
